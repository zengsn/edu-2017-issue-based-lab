{
  "committer" : {
    "login" : "hewq",
    "id" : 14369507,
    "avatar_url" : "https://avatars.githubusercontent.com/u/14369507?v=3",
    "gravatar_id" : "",
    "url" : "https://api.github.com/users/hewq",
    "html_url" : "https://github.com/hewq",
    "followers_url" : "https://api.github.com/users/hewq/followers",
    "following_url" : "https://api.github.com/users/hewq/following{/other_user}",
    "gists_url" : "https://api.github.com/users/hewq/gists{/gist_id}",
    "starred_url" : "https://api.github.com/users/hewq/starred{/owner}{/repo}",
    "subscriptions_url" : "https://api.github.com/users/hewq/subscriptions",
    "organizations_url" : "https://api.github.com/users/hewq/orgs",
    "repos_url" : "https://api.github.com/users/hewq/repos",
    "events_url" : "https://api.github.com/users/hewq/events{/privacy}",
    "received_events_url" : "https://api.github.com/users/hewq/received_events",
    "type" : "User",
    "site_admin" : false
  },
  "stats" : {
    "total" : 1042,
    "additions" : 1010,
    "deletions" : 32
  },
  "author" : {
    "login" : "hewq",
    "id" : 14369507,
    "avatar_url" : "https://avatars.githubusercontent.com/u/14369507?v=3",
    "gravatar_id" : "",
    "url" : "https://api.github.com/users/hewq",
    "html_url" : "https://github.com/hewq",
    "followers_url" : "https://api.github.com/users/hewq/followers",
    "following_url" : "https://api.github.com/users/hewq/following{/other_user}",
    "gists_url" : "https://api.github.com/users/hewq/gists{/gist_id}",
    "starred_url" : "https://api.github.com/users/hewq/starred{/owner}{/repo}",
    "subscriptions_url" : "https://api.github.com/users/hewq/subscriptions",
    "organizations_url" : "https://api.github.com/users/hewq/orgs",
    "repos_url" : "https://api.github.com/users/hewq/repos",
    "events_url" : "https://api.github.com/users/hewq/events{/privacy}",
    "received_events_url" : "https://api.github.com/users/hewq/received_events",
    "type" : "User",
    "site_admin" : false
  },
  "html_url" : "https://github.com/hzuapps/android-labs/commit/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
  "commit" : {
    "author" : {
      "name" : "HEWQ",
      "email" : "wenqiu.he@yahoo.com",
      "date" : "2016-05-11T07:46:04Z"
    },
    "committer" : {
      "name" : "HEWQ",
      "email" : "wenqiu.he@yahoo.com",
      "date" : "2016-05-11T07:46:04Z"
    },
    "message" : "完成app开发",
    "tree" : {
      "sha" : "6ff5792508dd62e1608069b28cda8cf6728ed963",
      "url" : "https://api.github.com/repos/hzuapps/android-labs/git/trees/6ff5792508dd62e1608069b28cda8cf6728ed963"
    },
    "url" : "https://api.github.com/repos/hzuapps/android-labs/git/commits/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "comment_count" : 0
  },
  "comments_url" : "https://api.github.com/repos/hzuapps/android-labs/commits/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/comments",
  "files" : [ {
    "sha" : "7c735dbd1525864ec43856083dcd218d61111cf7",
    "filename" : "app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/AndroidManifest.xml",
    "status" : "added",
    "additions" : 23,
    "deletions" : 0,
    "changes" : 23,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/AndroidManifest.xml",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/AndroidManifest.xml",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/AndroidManifest.xml?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "patch" : "@@ -0,0 +1,23 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    package=\"com.hewq.linkgame2\">\n+\n+    <application\n+        android:allowBackup=\"true\"\n+        android:icon=\"@mipmap/ic_launcher\"\n+        android:label=\"@string/app_name\"\n+        android:supportsRtl=\"true\"\n+        android:theme=\"@style/AppTheme\">\n+        <activity\n+            android:name=\".Com1314080901111Activity\"\n+            android:label=\"@string/app_name\"\n+            android:theme=\"@style/AppTheme.NoActionBar\">\n+            <intent-filter>\n+                <action android:name=\"android.intent.action.MAIN\" />\n+\n+                <category android:name=\"android.intent.category.LAUNCHER\" />\n+            </intent-filter>\n+        </activity>\n+    </application>\n+\n+</manifest>"
  }, {
    "sha" : "14cae36e16bef396e30581ecf470e051e850d0f5",
    "filename" : "app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/COM1314080901111Activity.java",
    "status" : "modified",
    "additions" : 317,
    "deletions" : 32,
    "changes" : 349,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/COM1314080901111Activity.java",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/COM1314080901111Activity.java",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/COM1314080901111Activity.java?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "patch" : "@@ -1,52 +1,337 @@\n-package com.hewq.linkgame;\n+package com.hewq.linkgame2;\n \n+\n+import android.app.Activity;\n+import android.app.AlertDialog;\n+import android.app.AlertDialog.Builder;\n+import android.content.DialogInterface;\n+import android.media.AudioManager;\n+import android.media.MediaPlayer;\n+import android.media.SoundPool;\n import android.os.Bundle;\n-import android.support.design.widget.FloatingActionButton;\n-import android.support.design.widget.Snackbar;\n-import android.support.v7.app.AppCompatActivity;\n-import android.support.v7.widget.Toolbar;\n+import android.os.Handler;\n+import android.os.Message;\n+import android.view.MotionEvent;\n import android.view.View;\n-import android.view.Menu;\n-import android.view.MenuItem;\n+import android.widget.Button;\n+import android.widget.ImageButton;\n+import android.widget.TextView;\n+\n+import com.hewq.linkgame2.service.LinkService;\n+import com.hewq.linkgame2.service.imp.LinkServiceImp;\n+import com.hewq.linkgame2.view.GameView;\n+import com.hewq.linkgame2.view.Piece;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Timer;\n+import java.util.TimerTask;\n+\n+public class Com1314080901111Activity extends Activity {\n+    //运行状态\n+    private static final int STATE_OFF=0;//关闭\n+    private static final int STATE_ON=1;//运行中\n+    private static final int STATE_PAUSE=2;//暂停中\n+\n+    private static final int INITSIZE_X=6;\n+    private static final int INITSIZE_Y=4;\n+    private static final int INITREMAIN_TIME=60;\n+    private static final int ALARM_TIME=10;\n+\n+    //警告声音每秒播放一次，频率太高，强制每隔alarmSpan秒播放一次\n+    private static final int ALARMSPAN=2;\n+\n+    private GameView myGameView;\n+    private TextView remainTimeTextView;\n+    private Button startButton;\n+    private ImageButton refreshButton;\n+\n+    private int  arrayXsize=INITSIZE_X;\n+    private int arrayYsize=INITSIZE_Y;\n+    private int remainTime=INITREMAIN_TIME;\n+\n+    private int currentState=STATE_OFF;//状态\n+    private Handler handler;\n+    private int timeChangeCode=20131120;\n+    private Timer timer;\n+    private TimerTask task ;\n+    private LinkService linkService;\n+    private Piece currentTouchPiece=null;\n+\n+    //游戏的音效\n+    private SoundPool mSoundPool;\n+    //选中的音效\n+    private final int soundChoose=1;\n+    //消失的音效\n+    private final int soundDisappear=2;\n+    //时间警告\n+    private int soundAlarm=3;\n+    //获胜音效\n+    private final int soundLose=4;\n+    //失败音效\n+    private final int soundWin=5;\n+\n+    private int soundPriority=1;\n+\n+    private HashMap<Integer, Integer> soundMap=\n+            new HashMap<Integer, Integer>();\n+\n+    //采用SoundPool播放背景音乐加载太慢，采用mediaplay播放背景音乐\n+    private MediaPlayer bgMediaPlayer;\n \n-public class COM1314080901111Activity extends AppCompatActivity {\n+    private boolean alarmPlay=false;\n \n     @Override\n     protected void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n-        setContentView(R.layout.activity_main_hewq);\n-        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n-        setSupportActionBar(toolbar);\n+        setContentView(R.layout.activity_main);\n+        myGameView =(GameView)findViewById(R.id.gameview);\n+        linkService =new LinkServiceImp();\n+        myGameView.setLinkService(linkService);\n+        remainTimeTextView=(TextView)findViewById(R.id.remainTime_textview);\n+        startButton =(Button)findViewById(R.id.start_button);\n+        remainTimeTextView.setText(\" \"+remainTime);\n+        refreshButton=(ImageButton)findViewById(R.id.refresh_button);\n \n-        FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);\n-        fab.setOnClickListener(new View.OnClickListener() {\n+        //游戏失败时的弹出框\n+        final Builder stupidBuilder = new AlertDialog.Builder(this);\n+        stupidBuilder.setIcon(R.drawable.stupid);\n+        stupidBuilder.setTitle(R.string.stupidtitle);\n+        stupidBuilder.setMessage(R.string.stupidmessage);\n+        stupidBuilder.setPositiveButton(R.string.stupidaccept,\n+                new DialogInterface.OnClickListener()\n+                {\n+                    public void onClick(DialogInterface dialog, int which)\n+                    {\n+                        initGameLogic();\n+                    }\n+                });\n+        stupidBuilder.setNegativeButton(R.string.stupidrefuse,\n+                new DialogInterface.OnClickListener() {\n+                    public void onClick(DialogInterface dialog, int which) {\n+                        com.hewq.linkgame2.Com1314080901111Activity.this.finish();\n+                    }\n+                }) ;\n+\n+        //游戏成功后的弹出框\n+        final Builder successBuilder = new AlertDialog.Builder(this);\n+        successBuilder.setIcon(R.drawable.success);\n+        successBuilder.setTitle(R.string.successtitle);\n+        successBuilder.setMessage(R.string.successmessage);\n+        successBuilder.setPositiveButton(R.string.successaccept,\n+                new DialogInterface.OnClickListener()\n+                {\n+                    public void onClick(DialogInterface dialog, int which)\n+                    {\n+                        arrayYsize++;\n+                        initGameLogic();\n+                    }\n+                });\n+\n+        successBuilder.setNegativeButton(R.string.successrefuse,\n+                new DialogInterface.OnClickListener() {\n+                    public void onClick(DialogInterface dialog, int which) {\n+                        Com1314080901111Activity.this.finish();\n+                    }\n+                }) ;\n+        bgMediaPlayer=MediaPlayer.create(this,R.raw.bg);\n+        //循环设置必须放在prepare的前面，否则不起作用，害我查了半天的资料啊！\n+        bgMediaPlayer.setLooping(true);\n+        try {\n+            bgMediaPlayer.prepare();\n+        } catch (IllegalStateException e) {\n+            // TODO Auto-generated catch block\n+            e.printStackTrace();\n+        } catch (IOException e) {\n+            // TODO Auto-generated catch block\n+            e.printStackTrace();\n+        }\n+\n+\n+        //游戏音效的初始\n+        mSoundPool = new SoundPool(6, AudioManager.STREAM_MUSIC, 0);\n+        soundMap.put(soundChoose, mSoundPool.load(this, R.raw.choose, 1));\n+        soundMap.put(soundDisappear, mSoundPool.load(this, R.raw.disappear1, 1));\n+        soundMap.put(soundAlarm, mSoundPool.load(this, R.raw.alarm, 1));\n+        soundMap.put(soundLose, mSoundPool.load(this, R.raw.lose, 1));\n+        soundMap.put(soundWin, mSoundPool.load(this, R.raw.win, 1));\n+\n+        //每秒更新一次游戏剩余时间，监测游戏是否已经到时间了\n+        handler= new Handler(){\n+            public void handleMessage(Message msg) {\n+                if(msg.what==timeChangeCode){\n+                    remainTime--;\n+                    remainTimeTextView.setText(\" \"+remainTime);\n+                    if(remainTime<=ALARM_TIME){\n+                        if(!alarmPlay){\n+                            alarmPlay=true;\n+                            bgMediaPlayer.pause();\n+                        }\n+                        if((remainTime%ALARMSPAN)==0){\n+                            mSoundPool.play(soundMap.get(soundAlarm), 1, 1, soundPriority, 0, 1);\n+                        }\n+                    }\n+                    if(remainTime==0){//游戏到时间结束处理逻辑\n+                        mSoundPool.pause(soundMap.get(soundAlarm));\n+                        stopGameLogic();\n+                        mSoundPool.play(soundMap.get(soundLose), 1, 1, soundPriority, 0, 1);\n+                        stupidBuilder.create().show();\n+\n+                    }\n+                    if(linkService.isGameOver()){//游戏顺利结束逻辑\n+                        //弹出回话框\n+                        mSoundPool.pause(soundMap.get(soundAlarm));\n+                        stopGameLogic();\n+                        mSoundPool.play(soundMap.get(soundWin), 1, 1, soundPriority, 0, 1);\n+                        successBuilder.create().show();\n+                    }\n+                }\n+            }\n+        };\n+\n+        //游戏开始按钮\n+        //游戏的状态：停止》开始》暂停》开始》停止\n+        startButton.setOnClickListener(new View.OnClickListener() {\n             @Override\n-            public void onClick(View view) {\n-                Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\n-                        .setAction(\"Action\", null).show();\n+            public void onClick(View v) {\n+                if(currentState==STATE_OFF){\n+                    initGameLogic();\n+                }else if(currentState==STATE_ON){\n+                    pauseGameLogic();\n+                }else if(currentState==STATE_PAUSE){\n+                    continueGameLogic();\n+                }\n             }\n         });\n+\n+        //刷新按钮\n+        refreshButton.setOnClickListener(new View.OnClickListener() {\n+            @Override\n+            public void onClick(View v) {\n+                refreshLogic();\n+            }\n+        });\n+\n+        myGameView.setOnTouchListener(new View.OnTouchListener() {\n+            public boolean onTouch(View v, MotionEvent event) {\n+                if(currentState==STATE_ON){//只有当游戏处于运行状态时才触发\n+                    if(event.getAction()==MotionEvent.ACTION_DOWN){\n+                        currentTouchPiece = processTouchDown(event);\n+                    }\n+                    if(event.getAction()==MotionEvent.ACTION_UP){\n+                        if(null!=currentTouchPiece){//只有点击了别的点，才需要做进一步的处理\n+                            processTouchUp (currentTouchPiece);\n+                        }\n+                    }\n+                }\n+                return true;\n+            }\n+\n+        });\n     }\n+    /*按下的处理逻辑\n+     * 处理逻辑如下：\n+     * 点击后，如果是可点击部分，图片变大\n+     * 调用连接处理逻辑，判断是否进行连线，并构建连线\n+     */\n+    private Piece processTouchDown(MotionEvent event){\n+        float touchX =event.getX();\n+        float touchY =event.getY();\n+        Piece touchPiece=linkService.getTouchPiece(touchX, touchY);\n+        if(null!=touchPiece){\n+            linkService.handleTouchDown(touchPiece);\n \n-    @Override\n-    public boolean onCreateOptionsMenu(Menu menu) {\n-        // Inflate the menu; this adds items to the action bar if it is present.\n-        getMenuInflater().inflate(R.menu.menu_main, menu);\n-        return true;\n+            myGameView.postInvalidate();\n+        }\n+        return touchPiece;\n     }\n \n-    @Override\n-    public boolean onOptionsItemSelected(MenuItem item) {\n-        // Handle action bar item clicks here. The action bar will\n-        // automatically handle clicks on the Home/Up button, so long\n-        // as you specify a parent activity in AndroidManifest.xml.\n-        int id = item.getItemId();\n-\n-        //noinspection SimplifiableIfStatement\n-        if (id == R.id.action_settings) {\n-            return true;\n+\n+    private void processTouchUp (Piece touchPiece){\n+        boolean dispare= linkService.handleTouchUp(touchPiece);\n+        if(dispare){\n+            mSoundPool.play(soundMap.get(soundDisappear), 1, 1, soundPriority, 0, 1);\n+        }else{\n+            mSoundPool.play(soundMap.get(soundChoose), 1, 1, soundPriority, 0, 1);\n+        }\n+        myGameView.postInvalidate();\n+    }\n+\n+    //开始，继续游戏逻辑\n+    private void stratTime(){\n+        if(timer==null){\n+            task = new TimerTask() {\n+                public void run() {\n+                    Message msg=new Message();\n+                    msg.what=timeChangeCode;\n+                    handler.sendMessage(msg);\n+                }\n+            };\n+            timer = new Timer(true);\n+            timer.schedule(task, 1000, 1000);\n         }\n+    }\n+    //暂停游戏逻辑\n+    private void stopTime(){\n+        if(timer!=null){\n+            timer.cancel();\n+            timer=null;\n+            task=null;\n+        }\n+    }\n+\n+\n+    //退出时释放资源\n+    @Override\n+    public void finish() {\n+        // TODO Auto-generated method stub\n+        super.finish();\n+        bgMediaPlayer.stop();\n+        bgMediaPlayer.release();\n+        bgMediaPlayer=null;\n \n-        return super.onOptionsItemSelected(item);\n+        mSoundPool.release();\n+        mSoundPool=null;\n+    }\n+\n+    //游戏开始的初始化逻辑\n+    //初始化游戏时间，启动音乐\n+    //初始化游戏界面\n+    //改变游戏状态及按钮显示\n+    //开始计时\n+    private void initGameLogic(){\n+        bgMediaPlayer.start();\n+        remainTime=INITREMAIN_TIME;\n+        int result = myGameView.startGame(arrayXsize, arrayYsize);\n+        startButton.setText(R.string.pausegame);\n+        stratTime();\n+        currentState=STATE_ON;\n+    }\n+    //暂停游戏的逻辑\n+    //停止时间，改变状态\n+    private void pauseGameLogic(){\n+        startButton.setText(R.string.continuegame);\n+        stopTime();\n+        currentState=STATE_PAUSE;\n+    }\n+    //继续游戏的逻辑\n+    //启动时间，改变状态\n+    private void continueGameLogic(){\n+        startButton.setText(R.string.pausegame);\n+        stratTime();\n+        currentState=STATE_ON;\n+    }\n+    //结束游戏的逻辑\n+    //改变游戏状态\n+    private void stopGameLogic(){\n+        startButton.setText(R.string.startgame);\n+        stopTime();\n+        currentState=STATE_OFF;\n+        bgMediaPlayer.pause();\n+    }\n+    //刷新逻辑\n+    private void refreshLogic(){\n+        stopGameLogic();\n+        initGameLogic();\n     }\n }"
  }, {
    "sha" : "6792e3ea827612f9a46d913205b075163278d82a",
    "filename" : "app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/bean/GameConfig.java",
    "status" : "added",
    "additions" : 10,
    "deletions" : 0,
    "changes" : 10,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/bean/GameConfig.java",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/bean/GameConfig.java",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/bean/GameConfig.java?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "patch" : "@@ -0,0 +1,10 @@\n+package com.hewq.linkgame2.bean;\n+\n+public class GameConfig {\n+\tpublic static int screenX;\n+\tpublic static int screenY;\n+\tpublic static int linkXnum;\n+\tpublic static int linkYnum;\n+\tpublic static int pieceWidth;\n+\tpublic static int pieceHeight;\n+}"
  }, {
    "sha" : "333caf3e2cbc5c1512f851f8c6fed302b7457e58",
    "filename" : "app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/service/LinkService.java",
    "status" : "added",
    "additions" : 26,
    "deletions" : 0,
    "changes" : 26,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/service/LinkService.java",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/service/LinkService.java",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/service/LinkService.java?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "patch" : "@@ -0,0 +1,26 @@\n+package com.hewq.linkgame2.service;\n+\n+import android.content.Context;\n+import android.view.View;\n+\n+import com.hewq.linkgame2.view.Liner;\n+import com.hewq.linkgame2.view.Piece;\n+\n+\n+public interface LinkService {\n+\tint startGame(Context context, int arrayXsize, int arrayYsize, View view);\n+\t\n+\tPiece[][]  getPieceArray();\n+\t\n+\tPiece getTouchPiece(float touchX, float touchY);\n+\t\t\n+\tLiner handleTouchDown(Piece currentPiece);\n+\tboolean handleTouchUp(Piece currentPiece);\n+\t\n+\t\n+\tboolean needLink();\n+\t\n+\tLiner getLiner();\n+\t\n+\tboolean isGameOver();\n+}"
  }, {
    "sha" : "10e818f6321589e3cd4c5f60c36cad9750a4cc4a",
    "filename" : "app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/service/imp/LinkServiceImp.java",
    "status" : "added",
    "additions" : 386,
    "deletions" : 0,
    "changes" : 386,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/service/imp/LinkServiceImp.java",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/service/imp/LinkServiceImp.java",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/service/imp/LinkServiceImp.java?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "patch" : "@@ -0,0 +1,386 @@\n+package com.hewq.linkgame2.service.imp;\n+\n+\n+import android.content.Context;\n+import android.graphics.Point;\n+import android.graphics.Rect;\n+import android.view.View;\n+\n+import com.hewq.linkgame2.R;\n+import com.hewq.linkgame2.service.LinkService;\n+import com.hewq.linkgame2.utils.ImageUtil;\n+import com.hewq.linkgame2.view.Liner;\n+import com.hewq.linkgame2.view.Piece;\n+import com.hewq.linkgame2.view.PieceImage;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+public class LinkServiceImp implements LinkService {\n+\tprivate int containerXsize;\n+\tprivate int containerYsize;\n+\tprivate int arrayXsize;\n+\tprivate int arrayYsize;\n+\tprivate Context mContext;\n+\tprivate Piece[][] mPieceArray;\n+\tprivate View mView;\n+\tprivate int pieceWidth;\n+\tprivate int pieceHight;\n+\tprivate Liner mLiner=new Liner();\n+\tprivate int pieceSumSize;\n+\tprivate Piece prePiece=null;\n+\t\n+\t\n+\t@Override\n+\tpublic int startGame(Context context, int arrayXsize, int arrayYsize,View view) {\n+\t\tmView=view;\n+\t\tcontainerXsize =mView.getWidth();\n+\t\tcontainerYsize=mView.getHeight();\n+\t\tmContext=context;\n+\t\tthis.arrayXsize=arrayXsize;\n+\t\tthis.arrayYsize=arrayYsize;\n+\t\tif((arrayXsize*arrayYsize)%2!=0){ //������һ��ż��\n+\t\t\treturn R.string.initwrong;\n+\t\t}\n+\t\tList<PieceImage> pieceImageList= ImageUtil.createPieceImageList(mContext, arrayXsize * arrayYsize);\n+\t\tmPieceArray=createPieceArray(pieceImageList);\n+\t\tpieceSumSize=arrayXsize*arrayYsize;\n+\t\treturn R.string.initsuccess;\n+\t}\n+\n+\t@Override\n+\tpublic Piece[][]  getPieceArray() {\n+\t\treturn mPieceArray;\n+\t}\n+\t\n+\t/**\n+\t ����ÿ�����Ԫ�أ����䲼������λ�ã�����λ�ý������� \n+\t */\n+\tprivate  Piece[][] createPieceArray(List<PieceImage> pieceImages){\n+\t\tPiece[][] piecesArray =new Piece[arrayXsize+2][arrayYsize+2];\n+\t\tpieceWidth=containerXsize/(arrayXsize+2);\n+\t\tpieceHight=containerYsize/(arrayYsize+2);\n+\t\tint listLoaction=0;\n+\t\tfor(int x=1;x<arrayXsize+1;x++){\n+\t\t\tfor(int y=1;y<arrayYsize+1;y++){\t\t\t\t\n+\t\t\t\tPiece tempPiece = new Piece();\n+\t\t\t\ttempPiece.setArrayX(x);\n+\t\t\t\ttempPiece.setArrayY(y);\n+\t\t\t\ttempPiece.setPieceImage(pieceImages.get(listLoaction++));\n+\t\t\t\tint coordLeft=x*pieceWidth+pieceWidth/5;\n+\t\t\t\tint coordTop=y*pieceHight+pieceHight/5;\n+\t\t\t\tint coordright=coordLeft +pieceWidth-pieceWidth/5;\n+\t\t\t\tint coordbottom=coordTop+pieceHight-pieceHight/5; \n+\t\t\t\tRect rect = new Rect(coordLeft, coordTop, coordright, coordbottom);\n+\t\t\t\ttempPiece.setLocationRect(rect);\n+\t\t\t\tpiecesArray[x][y]=tempPiece;\n+\t\t\t}\n+\t\t}\n+\t\treturn piecesArray;\n+\t}\n+\t\n+\t@Override\n+\tpublic Piece getTouchPiece(float touchX, float touchY) {\n+\t\tint currentXindex=(int) touchX/pieceWidth;\n+\t\tint currentYindex=(int) touchY/pieceHight;\n+\t\tif(currentXindex<=0||currentYindex<=0||currentXindex>=arrayXsize+1||currentYindex>=arrayYsize+1){\n+\t\t\treturn null;\n+\t\t}\n+\t\tif(prePiece!=null&&currentXindex==prePiece.getArrayX()&&currentYindex==prePiece.getArrayY()){\n+\t\t\treturn null;\n+\t\t}\n+\t\tif(mPieceArray[currentXindex][currentYindex]!=null){\n+\t\t\treturn mPieceArray[currentXindex][currentYindex];\n+\t\t}\n+\t\t\treturn null;\n+\t\t}\n+\t\n+\t@Override\n+\tpublic Liner handleTouchDown(Piece currentPiece) {\t\n+\t\tif(null==prePiece){//��һ����û��ʱ����ʼ��prePiece��������ӵ�\n+\t\t\tprePiece=currentPiece;\n+\t\t\tanimateBig(prePiece);\n+\t\t\tmLiner.clearPoint();\n+\t\t\treturn mLiner;\n+\t\t}else if(currentPiece.getPieceImage().getId()!=prePiece.getPieceImage().getId()){\n+\t\t\tanimateSmall(prePiece);\n+\t\t\tprePiece=currentPiece;\n+\t\t\tanimateBig(prePiece);\n+\t\t\tmLiner.clearPoint();\n+\t\t\treturn mLiner;\n+\t\t}\n+\t\telse if(currentPiece.getPieceImage().getId()==prePiece.getPieceImage().getId()){\n+\t\t\tboolean directConnectResult = directConnectTest(prePiece,currentPiece);\n+\t\t\tif(directConnectResult){//���ֱ�����ӳɹ���ֱ�ӷ���\n+\t\t\t\tcreateLinker(prePiece,currentPiece);\n+\t\t\t\tanimateBig(currentPiece);\n+\t\t\t\treturn mLiner;\n+\t\t\t}\n+\t\t\tboolean oneCornerConnectResult = oneCornerConnectTest(prePiece,currentPiece);\n+\t\t\tif(oneCornerConnectResult){\n+\t\t\t\tanimateBig(currentPiece);\n+\t\t\t\treturn mLiner;\n+\t\t\t}\n+\t\t\tboolean twoCornerConnectResult =twoCornerConnectTest(prePiece, currentPiece);\n+\t\t\tif(twoCornerConnectResult){\n+\t\t\t\tanimateBig(currentPiece);\n+\t\t\t\treturn mLiner;\n+\t\t\t}\n+\n+\t\t}\n+\t\tanimateSmall(prePiece);\n+\t\tprePiece=currentPiece;\n+\t\tanimateBig(prePiece);\n+\t\tmLiner.clearPoint();\n+\t\treturn mLiner;\n+\t}\n+\t\n+\tprivate boolean directConnectTest(Piece preOne,Piece nextOne){\n+\t\tif(preOne.getArrayX()==nextOne.getArrayX()||preOne.getArrayY()==nextOne.getArrayY()){\n+\t\tif(preOne.getArrayX()==nextOne.getArrayX()){//λ��ͬһ��\n+\t\t\tint sameX=preOne.getArrayX();\n+\t\t\tif(preOne.getArrayY()>nextOne.getArrayY()){\n+\t\t\t\treturn directConnectTest(nextOne,preOne); //ֻ�����һ��Ԫ���������������������λ��\n+\t\t\t}else{\n+\t\t\t\tint begin=preOne.getArrayY()+1;\n+\t\t\t\tint end=nextOne.getArrayY()-1;\n+\t\t\t\tfor(int indexY=begin;indexY<=end;indexY++){\n+\t\t\t\t\tif(null!=mPieceArray[sameX][indexY]){\n+\t\t\t\t\t\treturn false;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\treturn true;\n+\t\t\t}\t\t\t\n+\t\t}else if(preOne.getArrayY()==nextOne.getArrayY()){//λ��ͬһ��\n+\t\t\tint sameY=preOne.getArrayY();\n+\t\t\tif(preOne.getArrayX()>nextOne.getArrayX()){\n+\t\t\t\treturn(directConnectTest(nextOne,preOne)); //ֻ�����һ��Ԫ������ߵ�������������λ��\n+\t\t\t}else{\n+\t\t\t\tint begin=preOne.getArrayX()+1;\n+\t\t\t\tint end=nextOne.getArrayX()-1;\n+\t\t\t\tfor(int indexX=begin;indexX<=end;indexX++){\n+\t\t\t\t\tif(null!=mPieceArray[indexX][sameY]){\n+\t\t\t\t\t\treturn false;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\t return true;\n+\t\t\t}\n+\t\t}\n+\t\t}\n+\t\treturn false;\t\n+\t}\n+\t\n+\tprivate boolean oneCornerConnectTest(Piece preOne,Piece nextOne){\n+\t\tint firstCornerX=preOne.getArrayX();\n+\t\tint firstCornerY=nextOne.getArrayY();\n+\t\tint secondCornerX=nextOne.getArrayX();\n+\t\tint secondCornerY=preOne.getArrayY();\t\n+\t\tif(null!=mPieceArray[firstCornerX][firstCornerY]&&null!=mPieceArray[secondCornerX][secondCornerY]){\n+\t\t\treturn false;\n+\t\t}\n+\t\tif(null==mPieceArray[firstCornerX][firstCornerY]){\n+\t\t\tPiece firstCornerPiece = new Piece();\n+\t\t\tfirstCornerPiece.setArrayX(firstCornerY);\n+\t\t\tfirstCornerPiece.setArrayY(firstCornerY);\n+\t\t\tboolean directConnectFirst = directConnectTest(preOne,firstCornerPiece);\n+\t\t\tboolean directConnectSecond = directConnectTest(nextOne,firstCornerPiece);\n+\t\t\tif(directConnectFirst&&directConnectSecond)\t{\n+\t\t\t\t//��Ӷ��������ߵĹ��죨����ʽ��\n+\t\t\t\tcreateLinker(preOne,firstCornerPiece,nextOne);\n+\t\t\t\treturn true;\n+\t\t\t}\n+\t\t}\n+\t\tif(null==mPieceArray[secondCornerX][secondCornerY]){\n+\t\t\tPiece secondCornerPiece = new Piece();\n+\t\t\tsecondCornerPiece.setArrayX(secondCornerX);\n+\t\t\tsecondCornerPiece.setArrayY(secondCornerY);\n+\t\t\tboolean directConnectFirst = directConnectTest(preOne,secondCornerPiece);\n+\t\t\tboolean directConnectSecond = directConnectTest(nextOne,secondCornerPiece);\n+\t\t\tif(directConnectFirst&&directConnectSecond)\t{\n+\t\t\t\tcreateLinker(preOne,secondCornerPiece,nextOne);\n+\t\t\t\treturn true;\n+\t\t\t}\n+\t\t}\n+\t\treturn false;\n+\t}\n+\t\t\n+\tprivate boolean twoCornerConnectTest(Piece preOne,Piece nextOne){\n+\t\tList<List<Piece>> piecesList = new ArrayList<List<Piece>>();\n+\t\tList<Piece> preBlankPieces =createBlankPieceList(preOne);\n+\t\tList<Piece> nextBlankPieces =createBlankPieceList(nextOne);\n+\t\tif(null==preBlankPieces||preBlankPieces.size()<1||\n+\t\t\tnull==nextBlankPieces||nextBlankPieces.size()<1){ //����һ������Χû�пհ׵�ʱ�����޷�����\n+\t\t\treturn false;\n+\t\t}\n+\t\tfor(Piece preBlankPiece:preBlankPieces){\n+\t\t\tfor(Piece nextBlankPiece:nextBlankPieces){\n+\t\t\t\tif(preBlankPiece.getArrayX()==nextBlankPiece.getArrayX()){//λ��ͬ��ʱ���ж��Ƿ��ܹ�ֱ��\n+\t\t\t\t\tboolean directConnect = directConnectTest(preBlankPiece,nextBlankPiece);\n+\t\t\t\t\tif(directConnect){\n+\t\t\t\t\t\tList<Piece> pieces = new ArrayList<Piece>();\n+\t\t\t\t\t\tpieces.add(preOne);\n+\t\t\t\t\t\tpieces.add(preBlankPiece);\n+\t\t\t\t\t\tpieces.add(nextBlankPiece);\n+\t\t\t\t\t\tpieces.add(nextOne);\n+\t\t\t\t\t\tpiecesList.add(pieces);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tif(preBlankPiece.getArrayY()==nextBlankPiece.getArrayY()){//λ��ͬ��ʱ���ж��Ƿ��ܹ�ֱ��\n+\t\t\t\t\tboolean directConnect = directConnectTest(preBlankPiece,nextBlankPiece);\n+\t\t\t\t\tif(directConnect){\n+\t\t\t\t\t\tList<Piece> pieces = new ArrayList<Piece>();\n+\t\t\t\t\t\tpieces.add(preOne);\n+\t\t\t\t\t\tpieces.add(preBlankPiece);\n+\t\t\t\t\t\tpieces.add(nextBlankPiece);\n+\t\t\t\t\t\tpieces.add(nextOne);\n+\t\t\t\t\t\tpiecesList.add(pieces);\n+\t\t\t\t\t}\n+\t\t\t\t}\t\n+\t\t\t}\n+\t\t}\n+\t\tif(piecesList.size()<=0){\n+\t\t\treturn false;\n+\t\t}else{\n+\t\t\tList<Piece> shortestPieces= calShortestPieces(piecesList);\n+\t\t\tcreateLinker(shortestPieces.get(0),shortestPieces.get(1),shortestPieces.get(2),shortestPieces.get(3));\n+\t\t\treturn true;\n+\t\t}\n+\t}\n+\tprivate List<Piece> calShortestPieces(List<List<Piece>> piecesList){\n+\t\tint shortestSpan=-1;\n+\t\tList<Piece> shortestPieces=null;\n+\t\tfor(List<Piece> pieces:piecesList){\n+\t\t\tPiece firstPiece =pieces.get(0);\n+\t\t\tPiece secondePiece=pieces.get(1);\n+\t\t\tPiece thirdPiece=pieces.get(2);\n+\t\t\tPiece fourPiece=pieces.get(3);\n+\t\t\tint span=countSpan(firstPiece,secondePiece)+countSpan(secondePiece,thirdPiece)+countSpan(thirdPiece,fourPiece);\n+\t\t\tif(shortestSpan==-1){\n+\t\t\t\tshortestSpan=span;\n+\t\t\t\tshortestPieces=pieces;\n+\t\t\t}else if(shortestSpan>span){\n+\t\t\t\tshortestSpan=span;\n+\t\t\t\tshortestPieces=pieces;\n+\t\t\t}\n+\t\t}\n+\t\treturn shortestPieces;\n+\t}\n+\t\n+\tprivate int countSpan(Piece firstPiece,Piece secondePiece){\n+\t\tint span =0;\n+\t\tif(firstPiece.getArrayX()==secondePiece.getArrayX()){\n+\t\t\tspan=firstPiece.getArrayY()-secondePiece.getArrayY();\n+\t\t}\n+\t\tif(span<0){\n+\t\t\tspan=-span;\n+\t\t}\n+\t\treturn span;\n+\t}\n+\t\n+\tprivate List<Piece> createBlankPieceList(Piece piece){\n+\t\tint pieceX=piece.getArrayX();\n+\t\tint pieceY=piece.getArrayY();\n+\t\tList<Piece> blankPieceList = new ArrayList<Piece>();\n+\t\tfor(int indexY=pieceY-1;indexY>=0;indexY--){\n+\t\t\tif(null!=mPieceArray[pieceX][indexY]){\n+\t\t\t\tbreak;\n+\t\t\t}else{\n+\t\t\t\tPiece blankPiece =new Piece();\n+\t\t\t\tblankPiece.setArrayX(pieceX);\n+\t\t\t\tblankPiece.setArrayY(indexY);\n+\t\t\t\tblankPieceList.add(blankPiece);\n+\t\t\t}\n+\t\t}\n+\t\tfor(int indexY=pieceY+1;indexY<arrayYsize+2;indexY++){\n+\t\t\tif(null!=mPieceArray[pieceX][indexY]){\n+\t\t\t\tbreak;\n+\t\t\t}else{\n+\t\t\t\tPiece blankPiece =new Piece();\n+\t\t\t\tblankPiece.setArrayX(pieceX);\n+\t\t\t\tblankPiece.setArrayY(indexY);\n+\t\t\t\tblankPieceList.add(blankPiece);\n+\t\t\t}\n+\t\t}\n+\t\tfor(int indexX=pieceX-1;indexX>=0;indexX--){\n+\t\t\tif(null!=mPieceArray[indexX][pieceY]){\n+\t\t\t\tbreak;\n+\t\t\t}else{\n+\t\t\t\tPiece blankPiece =new Piece();\n+\t\t\t\tblankPiece.setArrayX(indexX);\n+\t\t\t\tblankPiece.setArrayY(pieceY);\n+\t\t\t\tblankPieceList.add(blankPiece);\n+\t\t\t}\n+\t\t}\n+\t\tfor(int indexX=pieceX+1;indexX<arrayXsize+2;indexX++){\n+\t\t\tif(null!=mPieceArray[indexX][pieceY]){\n+\t\t\t\tbreak;\n+\t\t\t}else{\n+\t\t\t\tPiece blankPiece =new Piece();\n+\t\t\t\tblankPiece.setArrayX(indexX);\n+\t\t\t\tblankPiece.setArrayY(pieceY);\n+\t\t\t\tblankPieceList.add(blankPiece);\n+\t\t\t}\n+\t\t}\n+\t\treturn blankPieceList;\n+\t}\n+\t\n+\tprivate void createLinker(Piece... pieces){\n+\t\tmLiner.clearPoint();\n+\t\tfor(Piece piece:pieces){\n+\t\t\tint xPosition=piece.getArrayX()*pieceWidth+pieceWidth/2;\n+\t\t\tint yPosition=piece.getArrayY()*pieceHight+pieceHight/2;\t\t\t\n+\t\t\tmLiner.addPoint(new Point(xPosition,yPosition));\n+\t\t}\t\n+\t}\n+\t\n+\t\n+\tprivate void animateBig(Piece currentPiece) {\n+\t\tRect rect =currentPiece.getLocationRect();\n+\t\trect.left=rect.left-pieceWidth/10;\t\t\n+\t\trect.top=rect.top-pieceHight/10;\n+\t\trect.right=rect.right+pieceWidth/10;\n+\t\trect.bottom=rect.bottom+pieceHight/10; \n+\t}\n+\n+\tprivate void animateSmall(Piece currentPiece) {\n+\t\tRect rect =currentPiece.getLocationRect();\n+\t\trect.left=rect.left+pieceWidth/10;\t\t\n+\t\trect.top=rect.top+pieceHight/10;\n+\t\trect.right=rect.right-pieceWidth/10;\n+\t\trect.bottom=rect.bottom-pieceHight/10; \t\n+\t}\n+\n+\t@Override\n+\tpublic boolean needLink() {\n+\t\treturn mLiner.needLink();\n+\t}\n+\n+\t@Override\n+\tpublic Liner getLiner() {\n+\t\treturn mLiner;\n+\t}\n+\n+\t@Override\n+\tpublic boolean handleTouchUp(Piece currentPiece) {\n+\t\tif(null!=prePiece&&null!=currentPiece&&mLiner.needLink()){\n+\t\t\tmPieceArray[prePiece.getArrayX()][prePiece.getArrayY()]=null;\n+\t\t\tmPieceArray[currentPiece.getArrayX()][currentPiece.getArrayY()]=null;\n+\t\t\tpieceSumSize =pieceSumSize-2;\n+\t\t\tprePiece=null;\n+\t\t\tmLiner.clearPoint();\n+\t\t\treturn true;\n+\t\t}else{\n+\t\t\tmLiner.clearPoint();\n+\t\t\treturn false;\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic boolean isGameOver() {\n+\t\treturn pieceSumSize<=0?true:false;\n+\t}\n+\t\n+\t\n+\t\n+\t\n+}"
  }, {
    "sha" : "a98d9cae1c4620aa69ba37a4794825563af3cb6f",
    "filename" : "app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/utils/ImageUtil.java",
    "status" : "added",
    "additions" : 66,
    "deletions" : 0,
    "changes" : 66,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/utils/ImageUtil.java",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/utils/ImageUtil.java",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/utils/ImageUtil.java?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "patch" : "@@ -0,0 +1,66 @@\n+package com.hewq.linkgame2.utils;\n+import java.lang.reflect.Field;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Random;\n+\n+import android.content.Context;\n+import android.graphics.Bitmap;\n+import android.graphics.BitmapFactory;\n+\n+import com.hewq.linkgame2.R;\n+import com.hewq.linkgame2.view.PieceImage;\n+\n+\n+public class ImageUtil {\n+\t\n+\t\n+\tpublic static List<PieceImage>createPieceImageList(Context context,int picNum){\n+\t\tList<PieceImage> retunList=new ArrayList<PieceImage>();\n+\t\tList<Integer>picList= getBackPictureNums(picNum);\n+\t\tfor(int index=0;index<picList.size();index++){\n+\t\t\tInteger picId= picList.get(index);\n+\t\t\tBitmap bitmap = BitmapFactory.decodeResource(context.getResources(), picId);\n+\t\t\tPieceImage tempPieceImage = new PieceImage();\n+\t\t\ttempPieceImage.setBitmap(bitmap);\n+\t\t\ttempPieceImage.setId(picId);\n+\t\t\tretunList.add(tempPieceImage);\n+\t\t}\n+\t\treturn retunList;\n+\t}\n+\t\n+\tprivate static List<Integer> getBackPictureNums(int sumSize){\n+\t\tint halfSize =sumSize/2;\n+\t\tList<Integer>pictureList = new ArrayList<Integer>();\n+\t\tRandom random = new Random(System.currentTimeMillis());\n+\t\tList<Integer> cartoonPicures =getCartoonPicureNums();\n+\t\tfor(int index=0;index<halfSize;index++){\n+\t\t\tpictureList.add(cartoonPicures.get(random.nextInt(cartoonPicures.size())));\n+\t\t}\n+\t\tpictureList.addAll(pictureList);\n+\t\tCollections.shuffle(pictureList);\n+\t\treturn pictureList;\n+\t}\n+\t\n+\tprivate static List<Integer> getCartoonPicureNums(){\n+\t\tList<Integer> result = new ArrayList<Integer>();\n+\t\tField[] fields =R.drawable.class.getFields();\n+\t\tfor(Field field:fields){\n+\t\t\tif(field.getName().indexOf(\"cartoon\")!=-1){\n+\t\t\t\ttry {\n+\t\t\t\t\tresult.add(field.getInt(R.drawable.class));\n+\t\t\t\t} catch (IllegalArgumentException e) {\n+\t\t\t\t\t// TODO Auto-generated catch block\n+\t\t\t\t\te.printStackTrace();\n+\t\t\t\t\treturn null;\n+\t\t\t\t} catch (IllegalAccessException e) {\n+\t\t\t\t\t// TODO Auto-generated catch block\n+\t\t\t\t\te.printStackTrace();\n+\t\t\t\t\treturn null;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\treturn result;\n+\t}\n+}"
  }, {
    "sha" : "9e3757185a98c03622e5aed7fd3fbb8123243d8f",
    "filename" : "app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/GameView.java",
    "status" : "added",
    "additions" : 58,
    "deletions" : 0,
    "changes" : 58,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/GameView.java",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/GameView.java",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/GameView.java?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "patch" : "@@ -0,0 +1,58 @@\n+package com.hewq.linkgame2.view;\n+\n+import android.content.Context;\n+import android.graphics.Canvas;\n+import android.graphics.Color;\n+import android.graphics.Paint;\n+import android.graphics.Point;\n+import android.util.AttributeSet;\n+import android.view.View;\n+\n+import com.hewq.linkgame2.service.LinkService;\n+\n+\n+public class GameView extends View{\n+\tprivate Paint mPaint;  \n+    private Context mContext;\n+    private Piece[][]  pieceArray;\n+    private Liner mLiner;\n+    private LinkService linkService;\n+\tpublic GameView(Context context, AttributeSet attrs) {\n+\t\tsuper(context, attrs);\n+\t\tmContext=context;\n+\t\tmPaint =new Paint();\n+\t\tmPaint.setColor(Color.BLUE);\n+\t\tmPaint.setStrokeWidth(5);\n+\t}\n+\t@Override\n+\tprotected void onDraw(Canvas canvas) {\n+\t\tsuper.onDraw(canvas);\n+\t\tpieceArray=linkService.getPieceArray();\n+\t\tmLiner=linkService.getLiner();\n+\t\tif(null!=pieceArray&&pieceArray.length>0){\n+\t\t\tfor(int x=0;x<pieceArray.length;x++){\n+\t\t\t\tfor(int y=0;y<pieceArray[x].length;y++){\n+\t\t\t\t\tif(null!=pieceArray[x][y]){\n+\t\t\t\t\tPiece piece = pieceArray[x][y];\n+\t\t\t\t\tcanvas.drawBitmap(piece.getPieceImage().getBitmap(),null, piece.getLocationRect(), null);\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\tif(mLiner.needLink()){\n+\t\t\tfor(int index=1;index<mLiner.getPoints().size();index++){\n+\t\t\t\tPoint point1=mLiner.getPoints().get(index-1);\n+\t\t\t\tPoint point2=mLiner.getPoints().get(index);\n+\t\t\t\tcanvas.drawLine(point1.x, point1.y,point2.x, point2.y, mPaint);\n+\t\t\t}\n+\t\t}\n+\t}\n+\tpublic int startGame(int arrayXsize,int arrayYsize){\n+\t\tint startResult=linkService.startGame(mContext, arrayXsize, arrayYsize, this);\n+\t\tthis.postInvalidate();\n+\t\treturn startResult;\n+\t}\n+\tpublic void setLinkService(LinkService linkService) {\n+\t\tthis.linkService = linkService;\n+\t}\n+}"
  }, {
    "sha" : "5e73743cf94fb29aade8b0fdec2c9e2fae3ade94",
    "filename" : "app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/Liner.java",
    "status" : "added",
    "additions" : 35,
    "deletions" : 0,
    "changes" : 35,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/Liner.java",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/Liner.java",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/Liner.java?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "patch" : "@@ -0,0 +1,35 @@\n+package com.hewq.linkgame2.view;\n+\n+import java.util.LinkedList;\n+import java.util.List;\n+\n+import android.graphics.Point;\n+\n+/**\n+ * ��������Ϣ\n+ */\n+public class Liner {\n+\tprivate List<Point> pointList=new LinkedList<Point>();\n+\t\n+\tpublic int addPoint(Point point){\n+\t\tpointList.add(point);\n+\t\treturn pointList.size();\n+\t}\n+\t\n+\tpublic boolean needLink(){\n+\t\treturn pointList.size()>0?true:false;\n+\t}\n+\t\n+\tpublic void clearPoint(){\n+\t\tif(needLink()){\n+\t\t\tpointList.clear();\n+\t\t}\n+\t}\n+\t\n+\tpublic List<Point> getPoints(){\n+\t\treturn pointList;\n+\t}\n+\t\n+\t\n+\t\n+}"
  }, {
    "sha" : "b78c439eb41fa8dbef243e41975ca834e26cd9f7",
    "filename" : "app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/Piece.java",
    "status" : "added",
    "additions" : 38,
    "deletions" : 0,
    "changes" : 38,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/Piece.java",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/Piece.java",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/Piece.java?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "patch" : "@@ -0,0 +1,38 @@\n+package com.hewq.linkgame2.view;\n+\n+import android.graphics.Rect;\n+\n+public class Piece {\n+\tprivate PieceImage pieceImage;\n+\tprivate int arrayX; //��1��ʼ\n+\tprivate int arrayY; //��1��ʼ\n+\tprivate Rect locationRect;\n+\t\n+\tpublic PieceImage getPieceImage() {\n+\t\treturn pieceImage;\n+\t}\n+\tpublic void setPieceImage(PieceImage pieceImage) {\n+\t\tthis.pieceImage = pieceImage;\n+\t}\n+\tpublic int getArrayX() {\n+\t\treturn arrayX;\n+\t}\n+\tpublic void setArrayX(int arrayX) {\n+\t\tthis.arrayX = arrayX;\n+\t}\n+\tpublic int getArrayY() {\n+\t\treturn arrayY;\n+\t}\n+\tpublic void setArrayY(int arrayY) {\n+\t\tthis.arrayY = arrayY;\n+\t}\n+\tpublic Rect getLocationRect() {\n+\t\treturn locationRect;\n+\t}\n+\tpublic void setLocationRect(Rect locationRect) {\n+\t\tthis.locationRect = locationRect;\n+\t}\n+\tpublic boolean isSameImage(Piece otherPiece){\n+\t\treturn pieceImage.isSameImage(otherPiece.getPieceImage());\n+\t}\n+}"
  }, {
    "sha" : "86cab505c690dfaaeede354c9232982286026d9b",
    "filename" : "app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/PieceImage.java",
    "status" : "added",
    "additions" : 28,
    "deletions" : 0,
    "changes" : 28,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/PieceImage.java",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/PieceImage.java",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/java/edu/hzuapps/androidworks/homeworks/com1314080901111/view/PieceImage.java?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "patch" : "@@ -0,0 +1,28 @@\n+package com.hewq.linkgame2.view;\n+\n+import android.graphics.Bitmap;\n+\n+public class PieceImage {\n+\tprivate int id;//����android�Զ����ɵ�id��������\n+\tprivate Bitmap bitmap;\n+\t\n+\tpublic int getId() {\n+\t\treturn id;\n+\t}\n+\tpublic void setId(int id) {\n+\t\tthis.id = id;\n+\t}\n+\tpublic Bitmap getBitmap() {\n+\t\treturn bitmap;\n+\t}\n+\tpublic void setBitmap(Bitmap bitmap) {\n+\t\tthis.bitmap = bitmap;\n+\t}\n+\t\n+\tpublic boolean isSameImage(PieceImage otherImage){\n+\t\tif(null==otherImage){\n+\t\t\treturn false;\n+\t\t}\n+\t\treturn id==otherImage.getId();\n+\t}\n+}"
  }, {
    "sha" : "ae4ec5d71a3d4b834bcf8e9e599e37a0f8f736ac",
    "filename" : "app/src/main/res/raw/alarm.ogg",
    "status" : "added",
    "additions" : 0,
    "deletions" : 0,
    "changes" : 0,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/raw/alarm.ogg",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/raw/alarm.ogg",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/res/raw/alarm.ogg?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2"
  }, {
    "sha" : "7fed96e0fe44dcdee604713d0b1be759126fd9e9",
    "filename" : "app/src/main/res/raw/bg.ogg",
    "status" : "added",
    "additions" : 0,
    "deletions" : 0,
    "changes" : 0,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/raw/bg.ogg",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/raw/bg.ogg",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/res/raw/bg.ogg?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2"
  }, {
    "sha" : "577505366d7a3100dd4f9d311ca83af35f61f0b1",
    "filename" : "app/src/main/res/raw/choose.ogg",
    "status" : "added",
    "additions" : 0,
    "deletions" : 0,
    "changes" : 0,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/raw/choose.ogg",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/raw/choose.ogg",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/res/raw/choose.ogg?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2"
  }, {
    "sha" : "f21004c7b32ff6fcd97427696e469c45ecb791ee",
    "filename" : "app/src/main/res/raw/disappear1.ogg",
    "status" : "added",
    "additions" : 0,
    "deletions" : 0,
    "changes" : 0,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/raw/disappear1.ogg",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/raw/disappear1.ogg",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/res/raw/disappear1.ogg?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2"
  }, {
    "sha" : "4c9fc8941d9d5498bc921905c92304420b0cb62e",
    "filename" : "app/src/main/res/raw/lose.ogg",
    "status" : "added",
    "additions" : 0,
    "deletions" : 0,
    "changes" : 0,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/raw/lose.ogg",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/raw/lose.ogg",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/res/raw/lose.ogg?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2"
  }, {
    "sha" : "fc973ca68bc859b47df34855d8d5d58dc341642c",
    "filename" : "app/src/main/res/raw/win.ogg",
    "status" : "added",
    "additions" : 0,
    "deletions" : 0,
    "changes" : 0,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/raw/win.ogg",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/raw/win.ogg",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/res/raw/win.ogg?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2"
  }, {
    "sha" : "3ab3e9cbce07f7cdc941fc8ba424c05e83ed80f0",
    "filename" : "app/src/main/res/values/colors.xml",
    "status" : "added",
    "additions" : 6,
    "deletions" : 0,
    "changes" : 6,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/values/colors.xml",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/values/colors.xml",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/res/values/colors.xml?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "patch" : "@@ -0,0 +1,6 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<resources>\n+    <color name=\"colorPrimary\">#3F51B5</color>\n+    <color name=\"colorPrimaryDark\">#303F9F</color>\n+    <color name=\"colorAccent\">#FF4081</color>\n+</resources>"
  }, {
    "sha" : "9a2efd38fadb222a2beef6130dff14ecc931e2e7",
    "filename" : "app/src/main/res/values/strings.xml",
    "status" : "modified",
    "additions" : 17,
    "deletions" : 0,
    "changes" : 17,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/values/strings.xml",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2/app/src/main/res/values/strings.xml",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/res/values/strings.xml?ref=ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
    "patch" : "@@ -33,4 +33,21 @@\n     <string name=\"title_activity_file_select\">FileSelectActivity</string>\n     <string name=\"title_activity_file_share\">FileShareActivity</string>\n     <string name=\"title_activity_network\">NetworkActivity</string>\n+\t\n+\t<string name=\"initwrong\">游戏初始化异常</string>\n+<string name=\"initsuccess\">游戏初始化成功</string>\n+\n+<string name=\"startgame\">开始游戏</string>\n+<string name=\"pausegame\">暂停游戏</string>\n+<string name=\"continuegame\">继续游戏</string>\n+<string name=\"remaintime\">剩余时间:</string>\n+\n+<string name=\"stupidtitle\">再来一把</string>\n+<string name=\"stupidmessage\">会不会玩，不会玩就别玩好吗!</string>\n+<string name=\"stupidaccept\">再来一把</string>\n+<string name=\"stupidrefuse\">认怂</string>\n+<string name=\"successtitle\">加大难度</string>\n+<string name=\"successmessage\">可以哦，再来啊!</string>\n+<string name=\"successaccept\">来!</string>\n+<string name=\"successrefuse\">我怕</string>\n </resources>"
  } ],
  "sha" : "ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
  "url" : "https://api.github.com/repos/hzuapps/android-labs/commits/ccdcf1f7d324ef16e2ce1bb6a759f874314e0aa2",
  "parents" : [ {
    "sha" : "ef6fe9c1e1b281bcf61edab9f14c127869448fd4",
    "url" : "https://api.github.com/repos/hzuapps/android-labs/commits/ef6fe9c1e1b281bcf61edab9f14c127869448fd4",
    "html_url" : "https://github.com/hzuapps/android-labs/commit/ef6fe9c1e1b281bcf61edab9f14c127869448fd4"
  } ]
}