{
  "committer" : {
    "login" : "Mepeekaboo",
    "id" : 14156851,
    "avatar_url" : "https://avatars.githubusercontent.com/u/14156851?v=3",
    "gravatar_id" : "",
    "url" : "https://api.github.com/users/Mepeekaboo",
    "html_url" : "https://github.com/Mepeekaboo",
    "followers_url" : "https://api.github.com/users/Mepeekaboo/followers",
    "following_url" : "https://api.github.com/users/Mepeekaboo/following{/other_user}",
    "gists_url" : "https://api.github.com/users/Mepeekaboo/gists{/gist_id}",
    "starred_url" : "https://api.github.com/users/Mepeekaboo/starred{/owner}{/repo}",
    "subscriptions_url" : "https://api.github.com/users/Mepeekaboo/subscriptions",
    "organizations_url" : "https://api.github.com/users/Mepeekaboo/orgs",
    "repos_url" : "https://api.github.com/users/Mepeekaboo/repos",
    "events_url" : "https://api.github.com/users/Mepeekaboo/events{/privacy}",
    "received_events_url" : "https://api.github.com/users/Mepeekaboo/received_events",
    "type" : "User",
    "site_admin" : false
  },
  "stats" : {
    "total" : 622,
    "additions" : 518,
    "deletions" : 104
  },
  "author" : {
    "login" : "Mepeekaboo",
    "id" : 14156851,
    "avatar_url" : "https://avatars.githubusercontent.com/u/14156851?v=3",
    "gravatar_id" : "",
    "url" : "https://api.github.com/users/Mepeekaboo",
    "html_url" : "https://github.com/Mepeekaboo",
    "followers_url" : "https://api.github.com/users/Mepeekaboo/followers",
    "following_url" : "https://api.github.com/users/Mepeekaboo/following{/other_user}",
    "gists_url" : "https://api.github.com/users/Mepeekaboo/gists{/gist_id}",
    "starred_url" : "https://api.github.com/users/Mepeekaboo/starred{/owner}{/repo}",
    "subscriptions_url" : "https://api.github.com/users/Mepeekaboo/subscriptions",
    "organizations_url" : "https://api.github.com/users/Mepeekaboo/orgs",
    "repos_url" : "https://api.github.com/users/Mepeekaboo/repos",
    "events_url" : "https://api.github.com/users/Mepeekaboo/events{/privacy}",
    "received_events_url" : "https://api.github.com/users/Mepeekaboo/received_events",
    "type" : "User",
    "site_admin" : false
  },
  "html_url" : "https://github.com/hzuapps/android-labs/commit/e8a7107c689c6b1048b1e3679e3cff302ced2386",
  "commit" : {
    "author" : {
      "name" : "Mepeekaboo",
      "email" : "83719348@qq.com",
      "date" : "2016-04-28T07:48:28Z"
    },
    "committer" : {
      "name" : "Mepeekaboo",
      "email" : "83719348@qq.com",
      "date" : "2016-04-28T07:48:28Z"
    },
    "message" : "实验2",
    "tree" : {
      "sha" : "900a8d6317e8d1aba10489fac4d030ae584b5680",
      "url" : "https://api.github.com/repos/hzuapps/android-labs/git/trees/900a8d6317e8d1aba10489fac4d030ae584b5680"
    },
    "url" : "https://api.github.com/repos/hzuapps/android-labs/git/commits/e8a7107c689c6b1048b1e3679e3cff302ced2386",
    "comment_count" : 0
  },
  "comments_url" : "https://api.github.com/repos/hzuapps/android-labs/commits/e8a7107c689c6b1048b1e3679e3cff302ced2386/comments",
  "files" : [ {
    "sha" : "ab1f7abcfe31888ef90976ae923138c623b8a013",
    "filename" : "app/src/main/java/edu/hzuapps/androidworks/MainActivity.java",
    "status" : "modified",
    "additions" : 247,
    "deletions" : 104,
    "changes" : 351,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/e8a7107c689c6b1048b1e3679e3cff302ced2386/app/src/main/java/edu/hzuapps/androidworks/MainActivity.java",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/e8a7107c689c6b1048b1e3679e3cff302ced2386/app/src/main/java/edu/hzuapps/androidworks/MainActivity.java",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/app/src/main/java/edu/hzuapps/androidworks/MainActivity.java?ref=e8a7107c689c6b1048b1e3679e3cff302ced2386",
    "patch" : "@@ -1,128 +1,271 @@\n-package edu.hzuapps.androidworks;\n+package com.example.recoder;\n \n-import android.app.Activity;\n-import android.content.Intent;\n+import java.io.File;\n+import java.io.IOException;\n+import java.text.SimpleDateFormat;\n+import java.util.ArrayList;\n+import java.util.Date;\n+\n+import android.app.AlertDialog;\n+import android.app.AlertDialog.Builder;\n+import android.content.DialogInterface;\n+import android.media.MediaPlayer;\n+import android.media.MediaRecorder;\n import android.os.Bundle;\n+import android.os.Environment;\n+import android.os.Handler;\n import android.support.v7.app.ActionBarActivity;\n-import android.util.Log;\n-import android.view.Menu;\n-import android.view.MenuItem;\n import android.view.View;\n+import android.view.View.OnClickListener;\n+import android.widget.AdapterView;\n+import android.widget.AdapterView.OnItemClickListener;\n+import android.widget.AdapterView.OnItemLongClickListener;\n+import android.widget.ArrayAdapter;\n import android.widget.Button;\n-import android.widget.RelativeLayout;\n+import android.widget.ListView;\n+import android.widget.SeekBar;\n+import android.widget.SeekBar.OnSeekBarChangeListener;\n+import android.widget.Toast;\n+import android.widget.ToggleButton;\n \n-import edu.hzuapps.androidworks.examples.AbsoluteLayoutActivity;\n-import edu.hzuapps.androidworks.examples.ActivityBasicActivity;\n-import edu.hzuapps.androidworks.examples.BroadcastReceiverActivity;\n-import edu.hzuapps.androidworks.examples.ContentProviderActivity;\n-import edu.hzuapps.androidworks.examples.FileSelectActivity;\n-import edu.hzuapps.androidworks.examples.FileShareActivity;\n-import edu.hzuapps.androidworks.examples.FileStorageActivity;\n-import edu.hzuapps.androidworks.examples.FragmentDemoActivity;\n-import edu.hzuapps.androidworks.examples.FrameLayoutActivity;\n-import edu.hzuapps.androidworks.examples.GridViewActivity;\n-import edu.hzuapps.androidworks.examples.LinearLayoutActivity;\n-import edu.hzuapps.androidworks.examples.ListViewActivity;\n-import edu.hzuapps.androidworks.examples.NetworkActivity;\n-import edu.hzuapps.androidworks.examples.RelativeLayoutActivity;\n-import edu.hzuapps.androidworks.examples.ServiceDemoActivity;\n-import edu.hzuapps.androidworks.examples.SharedPreferencesActivity;\n-import edu.hzuapps.androidworks.examples.TableLayoutActivity;\n-import edu.hzuapps.androidworks.examples.ViewBasicActivity;\n-import edu.hzuapps.androidworks.examples.ViewDemoActivity;\n-import edu.hzuapps.androidworks.homeworks.BackActivity;\n-import edu.hzuapps.androidworks.homeworks.com123456.Com123456Activity;\n \n public class MainActivity extends ActionBarActivity {\n \n-    public static final String TAG = MainActivity.class.getSimpleName();\n-\n-    String mName;\n-\n+\tprivate ToggleButton record,control;\n+\tprivate Button stop;\n+\tprivate MediaRecorder recorder;\n+\tprivate MediaPlayer player;\n+\tprivate ListView list;\n+\tprivate ArrayList<String> mylist;\n+\tprivate ArrayAdapter<String> adapter;\n+\tprivate String songPath;\n+\tprivate SeekBar bar;\n+\t\n+\t\n+    Handler handler=new Handler();\n+    Runnable updateThread=new Runnable() {\n+\t\t\n+\t\t@Override\n+\t\tpublic void run() {\n+\t\t\t// TODO Auto-generated method stub\n+\t\t\tbar.setProgress(player.getCurrentPosition()/1000);\n+\t\t\thandler.postDelayed(updateThread, 100);\n+\t\t}\n+\t};\n+\t\n     @Override\n     protected void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n-//         TODO 解析学生实验目录\n         setContentView(R.layout.activity_main);\n+        \n+        record=(ToggleButton)findViewById(R.id.toggleButton1);\n+        control=(ToggleButton)findViewById(R.id.toggleButton2);\n+        stop=(Button)findViewById(R.id.button1);\n+        list=(ListView)findViewById(R.id.listView1);\n+        bar=(SeekBar)findViewById(R.id.seekBar1);\n+        mylist=new ArrayList<String>();\n+        player=new MediaPlayer();\n+        \n+        adapter=new ArrayAdapter<>(this,android.R.layout.simple_list_item_activated_1,mylist);\n+        list.setAdapter(adapter);\n+        \n+        refreshFiles();\n+        \n+        record.setOnClickListener(new OnClickListener() {\n+\t\t\t\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\tif (record.isChecked()) {\n+\t\t\t\t\tstartRecord();\n+\t\t\t\t\tToast.makeText(MainActivity.this, \"��ʼ¼��\", Toast.LENGTH_SHORT).show();\n+\t\t\t\t} else {\n+\t\t\t\t\tstopRecord();\n+\t\t\t\t\trefreshFiles();\n+\t\t\t\t\tToast.makeText(MainActivity.this, \"����¼��\", Toast.LENGTH_SHORT).show();\n+\t\t\t\t}\n+\t\t\t}\n+\t\t});\n+        \n+        control.setOnClickListener(new OnClickListener() {\n+\t\t\t\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\tif (control.isChecked()) {\n+\t\t\t\t\tplayer.start();\n+\t\t\t\t\tbar.setMax(player.getDuration()/1000);\n+\t\t\t\t\thandler.post(updateThread);\n+\t\t\t\t} else {\n+\t\t\t\t\thandler.removeCallbacks(updateThread);\n+\t\t\t\t\tplayer.pause();\n+\t\t\t\t}\n+\t\t\t}\n+\t\t});\n+        \n+        stop.setOnClickListener(new OnClickListener() {\n+\t\t\t\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\thandler.removeCallbacks(updateThread);\n+\t\t\t\tplayer.stop();\n+\t\t\t\tbar.setProgress(0);\n+\t\t\t\tcontrol.setChecked(false);\n+\t\t\t\tprepareSong();\n+\t\t\t}\n+\t\t});\n+        \n+        list.setOnItemClickListener(new OnItemClickListener() {\n \n-        // 显示例子按钮\n-        prepareExampleButton(R.id.button_activitybasic);\n-        prepareExampleButton(R.id.button_viewbasic);\n-        prepareExampleButton(R.id.button_fragmentdemo);\n-        prepareExampleButton(R.id.button_servicedemo);\n-        prepareExampleButton(R.id.button_broadcastdemo);\n-        prepareExampleButton(R.id.button_contentprovidedemo);\n-        prepareExampleButton(R.id.button_viewdemo);\n+\t\t\t@Override\n+\t\t\tpublic void onItemClick(AdapterView<?> parent, View view,\n+\t\t\t\t\tint position, long id) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\tsongPath=(String) list.getItemAtPosition(position);\n+\t\t\t\tsongPath=Environment.getExternalStorageDirectory().getPath()+\"/sound_recorder/\"+songPath;\n+\t\t\t\tprepareSong();\n+\t\t\t}\n+\t\t});\n+        \n+        list.setOnItemLongClickListener(new OnItemLongClickListener() {\n \n-        // 随机显示一位同学的作业\n-        prepareExampleButton(R.id.button_random);\n+\t\t\t@Override\n+\t\t\tpublic boolean onItemLongClick(AdapterView<?> parent, View view,\n+\t\t\t\t\tint position, long id) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\t\n+\t\t\t\tsongPath=(String) list.getItemAtPosition(position);\n+\t\t\t\tsongPath=Environment.getExternalStorageDirectory().getPath()+\"/sound_recorder/\"+songPath;\n+\t\t\t\t\n+\t\t\t\tAlertDialog.Builder builder=new Builder(MainActivity.this);\n+\t\t\t\tbuilder.setMessage(\"ȷ��ɾ����?\");\n+\t\t\t\tbuilder.setTitle(\"��ʾ\");\n+\t\t\t\tbuilder.setPositiveButton(\"ȷ��\", new android.content.DialogInterface.OnClickListener() {\n+\t\t\t\t\t\n+\t\t\t\t\t@Override\n+\t\t\t\t\tpublic void onClick(DialogInterface dialog, int which) {\n+\t\t\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\t\t\tFile f=new File(songPath);\n+\t\t\t\t\t\tif (f.exists()) {\n+\t\t\t\t\t\t\tf.delete();\n+\t\t\t\t\t\t\trefreshFiles();\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\n+\t\t\t\t\t\tdialog.dismiss();\n+\t\t\t\t\t}\n+\t\t\t\t});\n+\t\t\t\tbuilder.setNegativeButton(\"ȡ��\", new android.content.DialogInterface.OnClickListener() {\n+\t\t\t\t\t\n+\t\t\t\t\t@Override\n+\t\t\t\t\tpublic void onClick(DialogInterface dialog, int which) {\n+\t\t\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\t\t\tdialog.dismiss();\n+\t\t\t\t\t}\n+\t\t\t\t});\n+\t\t\t\tbuilder.create().show();\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t});\n+        \n+        bar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {\n+\t\t\t\n+\t\t\t@Override\n+\t\t\tpublic void onStopTrackingTouch(SeekBar seekBar) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\t\n+\t\t\t}\n+\t\t\t\n+\t\t\t@Override\n+\t\t\tpublic void onStartTrackingTouch(SeekBar seekBar) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\t\n+\t\t\t}\n+\t\t\t\n+\t\t\t@Override\n+\t\t\tpublic void onProgressChanged(SeekBar seekBar, int progress,\n+\t\t\t\t\tboolean fromUser) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\tif (fromUser==true) {\n+\t\t\t\t\tplayer.seekTo(progress*1000);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t});\n \n     }\n-\n-    @Override\n-    public boolean onCreateOptionsMenu(Menu menu) {\n-        // Inflate the menu; this adds items to the action bar if it is present.\n-        getMenuInflater().inflate(R.menu.menu_main, menu);\n-        return true;\n+    \n+    private void startRecord() {\n+    \trecorder=new MediaRecorder();\n+    \trecorder.setAudioSource(MediaRecorder.AudioSource.MIC);\n+    \trecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);\n+    \trecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);\n+    \trecorder.setAudioChannels(1);\n+    \trecorder.setOutputFile(Environment.getExternalStorageDirectory().getPath()+\"/sound_recorder/\"+getTime()+\".amr\");\n+    \t\n+    \t\n+    \ttry {\n+    \t\trecorder.prepare();\n+    \t\trecorder.start();\n+    \t} catch (IllegalStateException e) {\n+    \t\te.printStackTrace();\n+    \t} catch (IOException e) {\n+    \t\te.printStackTrace();\n+    \t}\n     }\n-\n-    @Override\n-    public boolean onOptionsItemSelected(MenuItem item) {\n-        // Handle action bar item clicks here. The action bar will\n-        // automatically handle clicks on the Home/Up button, so long\n-        // as you specify a parent activity in AndroidManifest.xml.\n-        int id = item.getItemId();\n-\n-        //noinspection SimplifiableIfStatement\n-        if (id == R.id.action_settings) {\n-            System.out.println(\"Yes\");\n-//         Log.i(this.getClass().getSimpleName(), \"View created!\");\n-            Log.i(\"标题\", \"信息\");\n-            return true;\n-        }\n-\n-        return super.onOptionsItemSelected(item);\n+    \n+    private void stopRecord() {\n+    \t\n+    \t\n+    \t\n+        recorder.stop();\n+        recorder.reset();\n+        recorder.release();\n     }\n-\n-    private void openActivity(Activity activity, Class activityClass) {\n-        Intent intent = new Intent(activity, activityClass);\n-        activity.startActivity(intent);\n+    \n+    private void startPlay() {\n+    \t\n     }\n-\n-    private void prepareExampleButton(final int buttonId) {\n-        final Activity thisActivity = this;\n-        Button button = (Button) findViewById(buttonId);\n-        if (button != null) {\n-            button.setOnClickListener(new View.OnClickListener() {\n-                @Override\n-                public void onClick(View view) {\n-                    openActivity(thisActivity, getActivity(buttonId));\n-                }\n-            });\n-        } else {\n-            Log.e(TAG, \"按钮不存在: \" + buttonId);\n+    \n+    private void refreshFiles() {\n+    \tString dir=Environment.getExternalStorageDirectory().getPath()+\"/sound_recorder\";\n+        File []files=new File(dir).listFiles();\n+        String result;\n+        mylist.clear();\n+        \n+        for (File file:files) {\n+        \tmylist.add(file.getName());\n         }\n+        \n+    \tadapter.notifyDataSetChanged();\n     }\n-\n-    private Class getActivity(int id) {\n-        if (R.id.button_activitybasic == id) {\n-            return ActivityBasicActivity.class;\n-        } else if (R.id.button_viewbasic == id) {\n-            return ViewBasicActivity.class;\n-        } else if (R.id.button_fragmentdemo == id) {\n-            return FragmentDemoActivity.class;\n-        } else if (R.id.button_servicedemo == id) {\n-            return ServiceDemoActivity.class;\n-        } else if (R.id.button_broadcastdemo == id) {\n-            return BroadcastReceiverActivity.class;\n-        } else if (R.id.button_contentprovidedemo == id) {\n-            return ContentProviderActivity.class;\n-        } else if (R.id.button_viewdemo == id) {\n-            return ViewDemoActivity.class;\n-        } else if (R.id.button_random == id) {\n-            return FileShareActivity.class;\n-        } else {\n-            return BackActivity.class;\n-        }\n+    \n+    private String getTime() {\n+    \tSimpleDateFormat formatter=new SimpleDateFormat(\"yyyy��MM��dd��HH:mm:ss\");\n+    \tDate curDate=new Date(System.currentTimeMillis());\n+    \tString str=formatter.format(curDate);\n+    \treturn str;\n     }\n+    \n+    private void prepareSong() {\n+\t\ttry {\n+\t\t\tplayer.reset();\n+\t\t\tplayer.setDataSource(songPath);\n+\t\t\tplayer.prepare();\n+\t\t} catch (IllegalArgumentException e) {\n+\t\t\t// TODO Auto-generated catch block\n+\t\t\te.printStackTrace();\n+\t\t} catch (SecurityException e) {\n+\t\t\t// TODO Auto-generated catch block\n+\t\t\te.printStackTrace();\n+\t\t} catch (IllegalStateException e) {\n+\t\t\t// TODO Auto-generated catch block\n+\t\t\te.printStackTrace();\n+\t\t} catch (IOException e) {\n+\t\t\t// TODO Auto-generated catch block\n+\t\t\te.printStackTrace();\n+\t\t}\n+    }\n+    \n+\n+    \n }"
  }, {
    "sha" : "ab1f7abcfe31888ef90976ae923138c623b8a013",
    "filename" : "edu.hzuapps.androidworks.homeworks.com1314080901215/MainActivity.java",
    "status" : "added",
    "additions" : 271,
    "deletions" : 0,
    "changes" : 271,
    "blob_url" : "https://github.com/hzuapps/android-labs/blob/e8a7107c689c6b1048b1e3679e3cff302ced2386/edu.hzuapps.androidworks.homeworks.com1314080901215/MainActivity.java",
    "raw_url" : "https://github.com/hzuapps/android-labs/raw/e8a7107c689c6b1048b1e3679e3cff302ced2386/edu.hzuapps.androidworks.homeworks.com1314080901215/MainActivity.java",
    "contents_url" : "https://api.github.com/repos/hzuapps/android-labs/contents/edu.hzuapps.androidworks.homeworks.com1314080901215/MainActivity.java?ref=e8a7107c689c6b1048b1e3679e3cff302ced2386",
    "patch" : "@@ -0,0 +1,271 @@\n+package com.example.recoder;\n+\n+import java.io.File;\n+import java.io.IOException;\n+import java.text.SimpleDateFormat;\n+import java.util.ArrayList;\n+import java.util.Date;\n+\n+import android.app.AlertDialog;\n+import android.app.AlertDialog.Builder;\n+import android.content.DialogInterface;\n+import android.media.MediaPlayer;\n+import android.media.MediaRecorder;\n+import android.os.Bundle;\n+import android.os.Environment;\n+import android.os.Handler;\n+import android.support.v7.app.ActionBarActivity;\n+import android.view.View;\n+import android.view.View.OnClickListener;\n+import android.widget.AdapterView;\n+import android.widget.AdapterView.OnItemClickListener;\n+import android.widget.AdapterView.OnItemLongClickListener;\n+import android.widget.ArrayAdapter;\n+import android.widget.Button;\n+import android.widget.ListView;\n+import android.widget.SeekBar;\n+import android.widget.SeekBar.OnSeekBarChangeListener;\n+import android.widget.Toast;\n+import android.widget.ToggleButton;\n+\n+\n+public class MainActivity extends ActionBarActivity {\n+\n+\tprivate ToggleButton record,control;\n+\tprivate Button stop;\n+\tprivate MediaRecorder recorder;\n+\tprivate MediaPlayer player;\n+\tprivate ListView list;\n+\tprivate ArrayList<String> mylist;\n+\tprivate ArrayAdapter<String> adapter;\n+\tprivate String songPath;\n+\tprivate SeekBar bar;\n+\t\n+\t\n+    Handler handler=new Handler();\n+    Runnable updateThread=new Runnable() {\n+\t\t\n+\t\t@Override\n+\t\tpublic void run() {\n+\t\t\t// TODO Auto-generated method stub\n+\t\t\tbar.setProgress(player.getCurrentPosition()/1000);\n+\t\t\thandler.postDelayed(updateThread, 100);\n+\t\t}\n+\t};\n+\t\n+    @Override\n+    protected void onCreate(Bundle savedInstanceState) {\n+        super.onCreate(savedInstanceState);\n+        setContentView(R.layout.activity_main);\n+        \n+        record=(ToggleButton)findViewById(R.id.toggleButton1);\n+        control=(ToggleButton)findViewById(R.id.toggleButton2);\n+        stop=(Button)findViewById(R.id.button1);\n+        list=(ListView)findViewById(R.id.listView1);\n+        bar=(SeekBar)findViewById(R.id.seekBar1);\n+        mylist=new ArrayList<String>();\n+        player=new MediaPlayer();\n+        \n+        adapter=new ArrayAdapter<>(this,android.R.layout.simple_list_item_activated_1,mylist);\n+        list.setAdapter(adapter);\n+        \n+        refreshFiles();\n+        \n+        record.setOnClickListener(new OnClickListener() {\n+\t\t\t\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\tif (record.isChecked()) {\n+\t\t\t\t\tstartRecord();\n+\t\t\t\t\tToast.makeText(MainActivity.this, \"��ʼ¼��\", Toast.LENGTH_SHORT).show();\n+\t\t\t\t} else {\n+\t\t\t\t\tstopRecord();\n+\t\t\t\t\trefreshFiles();\n+\t\t\t\t\tToast.makeText(MainActivity.this, \"����¼��\", Toast.LENGTH_SHORT).show();\n+\t\t\t\t}\n+\t\t\t}\n+\t\t});\n+        \n+        control.setOnClickListener(new OnClickListener() {\n+\t\t\t\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\tif (control.isChecked()) {\n+\t\t\t\t\tplayer.start();\n+\t\t\t\t\tbar.setMax(player.getDuration()/1000);\n+\t\t\t\t\thandler.post(updateThread);\n+\t\t\t\t} else {\n+\t\t\t\t\thandler.removeCallbacks(updateThread);\n+\t\t\t\t\tplayer.pause();\n+\t\t\t\t}\n+\t\t\t}\n+\t\t});\n+        \n+        stop.setOnClickListener(new OnClickListener() {\n+\t\t\t\n+\t\t\t@Override\n+\t\t\tpublic void onClick(View v) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\thandler.removeCallbacks(updateThread);\n+\t\t\t\tplayer.stop();\n+\t\t\t\tbar.setProgress(0);\n+\t\t\t\tcontrol.setChecked(false);\n+\t\t\t\tprepareSong();\n+\t\t\t}\n+\t\t});\n+        \n+        list.setOnItemClickListener(new OnItemClickListener() {\n+\n+\t\t\t@Override\n+\t\t\tpublic void onItemClick(AdapterView<?> parent, View view,\n+\t\t\t\t\tint position, long id) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\tsongPath=(String) list.getItemAtPosition(position);\n+\t\t\t\tsongPath=Environment.getExternalStorageDirectory().getPath()+\"/sound_recorder/\"+songPath;\n+\t\t\t\tprepareSong();\n+\t\t\t}\n+\t\t});\n+        \n+        list.setOnItemLongClickListener(new OnItemLongClickListener() {\n+\n+\t\t\t@Override\n+\t\t\tpublic boolean onItemLongClick(AdapterView<?> parent, View view,\n+\t\t\t\t\tint position, long id) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\t\n+\t\t\t\tsongPath=(String) list.getItemAtPosition(position);\n+\t\t\t\tsongPath=Environment.getExternalStorageDirectory().getPath()+\"/sound_recorder/\"+songPath;\n+\t\t\t\t\n+\t\t\t\tAlertDialog.Builder builder=new Builder(MainActivity.this);\n+\t\t\t\tbuilder.setMessage(\"ȷ��ɾ����?\");\n+\t\t\t\tbuilder.setTitle(\"��ʾ\");\n+\t\t\t\tbuilder.setPositiveButton(\"ȷ��\", new android.content.DialogInterface.OnClickListener() {\n+\t\t\t\t\t\n+\t\t\t\t\t@Override\n+\t\t\t\t\tpublic void onClick(DialogInterface dialog, int which) {\n+\t\t\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\t\t\tFile f=new File(songPath);\n+\t\t\t\t\t\tif (f.exists()) {\n+\t\t\t\t\t\t\tf.delete();\n+\t\t\t\t\t\t\trefreshFiles();\n+\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\n+\t\t\t\t\t\tdialog.dismiss();\n+\t\t\t\t\t}\n+\t\t\t\t});\n+\t\t\t\tbuilder.setNegativeButton(\"ȡ��\", new android.content.DialogInterface.OnClickListener() {\n+\t\t\t\t\t\n+\t\t\t\t\t@Override\n+\t\t\t\t\tpublic void onClick(DialogInterface dialog, int which) {\n+\t\t\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\t\t\tdialog.dismiss();\n+\t\t\t\t\t}\n+\t\t\t\t});\n+\t\t\t\tbuilder.create().show();\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t});\n+        \n+        bar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {\n+\t\t\t\n+\t\t\t@Override\n+\t\t\tpublic void onStopTrackingTouch(SeekBar seekBar) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\t\n+\t\t\t}\n+\t\t\t\n+\t\t\t@Override\n+\t\t\tpublic void onStartTrackingTouch(SeekBar seekBar) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\t\n+\t\t\t}\n+\t\t\t\n+\t\t\t@Override\n+\t\t\tpublic void onProgressChanged(SeekBar seekBar, int progress,\n+\t\t\t\t\tboolean fromUser) {\n+\t\t\t\t// TODO Auto-generated method stub\n+\t\t\t\tif (fromUser==true) {\n+\t\t\t\t\tplayer.seekTo(progress*1000);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t});\n+\n+    }\n+    \n+    private void startRecord() {\n+    \trecorder=new MediaRecorder();\n+    \trecorder.setAudioSource(MediaRecorder.AudioSource.MIC);\n+    \trecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);\n+    \trecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);\n+    \trecorder.setAudioChannels(1);\n+    \trecorder.setOutputFile(Environment.getExternalStorageDirectory().getPath()+\"/sound_recorder/\"+getTime()+\".amr\");\n+    \t\n+    \t\n+    \ttry {\n+    \t\trecorder.prepare();\n+    \t\trecorder.start();\n+    \t} catch (IllegalStateException e) {\n+    \t\te.printStackTrace();\n+    \t} catch (IOException e) {\n+    \t\te.printStackTrace();\n+    \t}\n+    }\n+    \n+    private void stopRecord() {\n+    \t\n+    \t\n+    \t\n+        recorder.stop();\n+        recorder.reset();\n+        recorder.release();\n+    }\n+    \n+    private void startPlay() {\n+    \t\n+    }\n+    \n+    private void refreshFiles() {\n+    \tString dir=Environment.getExternalStorageDirectory().getPath()+\"/sound_recorder\";\n+        File []files=new File(dir).listFiles();\n+        String result;\n+        mylist.clear();\n+        \n+        for (File file:files) {\n+        \tmylist.add(file.getName());\n+        }\n+        \n+    \tadapter.notifyDataSetChanged();\n+    }\n+    \n+    private String getTime() {\n+    \tSimpleDateFormat formatter=new SimpleDateFormat(\"yyyy��MM��dd��HH:mm:ss\");\n+    \tDate curDate=new Date(System.currentTimeMillis());\n+    \tString str=formatter.format(curDate);\n+    \treturn str;\n+    }\n+    \n+    private void prepareSong() {\n+\t\ttry {\n+\t\t\tplayer.reset();\n+\t\t\tplayer.setDataSource(songPath);\n+\t\t\tplayer.prepare();\n+\t\t} catch (IllegalArgumentException e) {\n+\t\t\t// TODO Auto-generated catch block\n+\t\t\te.printStackTrace();\n+\t\t} catch (SecurityException e) {\n+\t\t\t// TODO Auto-generated catch block\n+\t\t\te.printStackTrace();\n+\t\t} catch (IllegalStateException e) {\n+\t\t\t// TODO Auto-generated catch block\n+\t\t\te.printStackTrace();\n+\t\t} catch (IOException e) {\n+\t\t\t// TODO Auto-generated catch block\n+\t\t\te.printStackTrace();\n+\t\t}\n+    }\n+    \n+\n+    \n+}"
  } ],
  "sha" : "e8a7107c689c6b1048b1e3679e3cff302ced2386",
  "url" : "https://api.github.com/repos/hzuapps/android-labs/commits/e8a7107c689c6b1048b1e3679e3cff302ced2386",
  "parents" : [ {
    "sha" : "b755b4efdb6547b00674185344f474a29db3c194",
    "url" : "https://api.github.com/repos/hzuapps/android-labs/commits/b755b4efdb6547b00674185344f474a29db3c194",
    "html_url" : "https://github.com/hzuapps/android-labs/commit/b755b4efdb6547b00674185344f474a29db3c194"
  } ]
}